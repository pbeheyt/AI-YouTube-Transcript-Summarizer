(()=>{const e={childList:!0,subtree:!0};let t=0;const o=new MutationObserver((()=>{document.querySelector('p[data-placeholder="How can Claude help you today?"]')||document.querySelector('[contenteditable="true"]')?(console.log("Claude editor element found"),o.disconnect(),(async()=>{try{const e=await chrome.storage.local.get(["prePrompt","youtubeVideoData"]);if(console.log("Retrieved data:",e),!e.prePrompt)throw new Error("No prePrompt found in storage");if(!e.youtubeVideoData)throw new Error("YouTube data missing from storage");const t=(e=>{if(e.error)return`Error: ${e.message||"Unknown error occurred while extracting YouTube data"}`;const t=e.videoTitle||"No title available",o=e.channelName||"Unknown channel",n=e.videoDescription||"No description available";return`YouTube Video Information:\n  Title: ${t}\n  Channel: ${o}\n  Views: ${e.views||"Unknown"}\n  Published: ${e.publishDate||"Unknown date"}\n  \n  Description:\n  ${n}\n  \n  Transcript:\n  ${e.transcript||"No transcript available"}`})(e.youtubeVideoData),o=`${e.prePrompt}\n\n${t}`;if(console.log("Attempting to insert text into Claude..."),!function(e){let t=document.querySelector('p[data-placeholder="How can Claude help you today?"]');if(t||(t=document.querySelector('[contenteditable="true"]')),!t)return console.error("Claude editor element not found"),!1;t.innerHTML="";const o=e.split("\n");o.forEach(((e,n)=>{const r=document.createElement("p");r.textContent=e,t.appendChild(r),n<o.length-1&&t.appendChild(document.createElement("br"))})),t.classList.remove("is-empty","is-editor-empty");const n=new Event("input",{bubbles:!0});return t.dispatchEvent(n),setTimeout((()=>{var e;const t=document.querySelector('button[aria-label="Send message"]')||document.querySelector('button[aria-label="Send Message"]')||(null===(e=document.querySelector('button svg path[d*="M208.49,120.49"]'))||void 0===e?void 0:e.closest("button"));t?(console.log("Send button found, clicking..."),t.disabled=!1,["mousedown","mouseup","click"].forEach((e=>{const o=new MouseEvent(e,{view:window,bubbles:!0,cancelable:!0,buttons:1});t.dispatchEvent(o)}))):console.error("Send button not found")}),1e3),!0}(o))throw new Error("Failed to insert message into Claude");console.log("Message successfully inserted into Claude")}catch(e){console.error("Error in handling Claude process:",e)}})()):(t++,t>=10&&(o.disconnect(),console.error("Failed to find Claude editor element after maximum retries")))}));"complete"===document.readyState?o.observe(document.body,e):window.addEventListener("load",(()=>{o.observe(document.body,e)}))})();