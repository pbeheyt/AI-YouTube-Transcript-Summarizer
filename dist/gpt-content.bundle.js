(()=>{const e={childList:!0,subtree:!0};let o=0;const t=new MutationObserver((()=>{document.querySelector("#prompt-textarea")?(console.log("GPT editor div found"),t.disconnect(),(async()=>{try{const e=await chrome.storage.local.get(["prePrompt","youtubeVideoData"]);if(console.log("Retrieved data for GPT:",e),!e.prePrompt)throw new Error("No prePrompt found in storage");if(!e.youtubeVideoData)throw new Error("YouTube data missing from storage");const o=(e=>{if(e.error)return`Error: ${e.message||"Unknown error occurred while extracting YouTube data"}`;const o=e.videoTitle||"No title available",t=e.channelName||"Unknown channel",n=e.videoDescription||"No description available";return`YouTube Video Information:\n  Title: ${o}\n  Channel: ${t}\n  Views: ${e.views||"Unknown"}\n  Published: ${e.publishDate||"Unknown date"}\n  \n  Description:\n  ${n}\n  \n  Transcript:\n  ${e.transcript||"No transcript available"}`})(e.youtubeVideoData),t=`${e.prePrompt}\n\n${o}`;if(console.log("Attempting to insert text into GPT..."),!function(e){const o=document.querySelector("#prompt-textarea");if(!o)return console.error("GPT editor div not found"),!1;try{o.value=e,o.focus();const t=new Event("input",{bubbles:!0});return o.dispatchEvent(t),setTimeout((()=>{const e=document.querySelector('button[data-testid="send-button"]:not(:disabled)');e?(console.log("Send button found, clicking..."),["mousedown","mouseup","click"].forEach((o=>{const t=new MouseEvent(o,{view:window,bubbles:!0,cancelable:!0,buttons:1});e.dispatchEvent(t)}))):console.error("Send button not found or disabled")}),1e3),!0}catch(e){return console.error("Error inserting text:",e),!1}}(t))throw new Error("Failed to insert message into GPT");console.log("Message successfully inserted into GPT")}catch(e){console.error("Error in handling GPT process:",e)}})()):(o++,o>=10&&(t.disconnect(),console.error("Failed to find GPT editor div after maximum retries")))}));"complete"===document.readyState?t.observe(document.body,e):window.addEventListener("load",(()=>{t.observe(document.body,e)}))})();